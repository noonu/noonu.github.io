(function($){$.fn.extend({"tinyAccordion":function(options){options=$.extend({"width":800,"height":400,"barWidth":30,"showInBar":false,"initialActiveItem":0,"activateOn":"click","speed":500,"easing":"swing","onTriggerAnimate":function(){},"onAnimateComplete":function(){},"autoPlay":false,"pauseOnHover":true,"playInterval":800},options);var iWidth=options.width;var iHeight=options.height;var iBarWidth=options.barWidth;var showInBar=options.showInBar;var initialActiveItem=options.initialActiveItem;var activateOn=options.activateOn;var speed=options.speed;var easing=options.easing;var onTriggerAnimate=options.onTriggerAnimate;var onAnimateComplete=options.onAnimateComplete;var autoPlay=options.autoPlay;var pauseOnHover=options.pauseOnHover;var playInterval=options.playInterval;var $allItems=$(">ul>li",this);var iNum=$allItems.length;var $allBar=$(">h2",$allItems);var $allContent=$(">div",$allItems);var $itemsToMove=null;var to=0;var iNow=initialActiveItem;var _this=this;var timer=null;_this.itemToShow=$allItems[initialActiveItem];_this.itemToHide=$allItems[initialActiveItem];this.css({"width":iWidth,"height":iHeight,"position":"relative","overflow":"hidden"});$allItems.css({"width":iWidth,"height":iHeight,"position":"absolute","list-style":"none"}).each(function(index){var left=0;if(index>initialActiveItem){left=iWidth-(iNum-index)*iBarWidth;this.lor=1;}
else{left=index*iBarWidth;this.lor=0;}
$(this).css({"left":left});});$allBar.css({"position":"absolute","width":iBarWidth,"height":iHeight,"display":"block","z-index":100})
[activateOn](doAnimate);$allContent.css({"width":iWidth-iBarWidth*iNum,"height":iHeight,"position":"absolute","top":0,"left":showInBar?0:iBarWidth});if(autoPlay){start();}
if(autoPlay&&pauseOnHover){this.mouseover(function(){stop();});this.mouseout(function(){start();});}
_this.next=next;_this.prev=prev;_this.start=start;_this.stop=stop;_this.activeItem=activeItem;
function start(){clearInterval(timer);timer=setInterval(next,playInterval);}
function stop(){clearInterval(timer);}
function next(){iNow++;if(iNow===iNum){iNow=0;}
activeItem(iNow);}
function prev(){iNow--;if(iNow<0){iNow=iNum-1;}
activeItem(iNow);}
function activeItem(orderNumber){var bar=$("h2",$allItems[orderNumber])[0];doAnimate.call(bar);}
function doAnimate(){var $item=$(this).parent();_this.itemToHide=_this.itemToShow;if($item[0].lor){_this.itemToShow=$item[0];onTriggerAnimate.call(_this);$itemsToMove=$item.prevAll().filter(function(){return this.lor;}).add($item);$itemsToMove.each(function(){to=$(this).prevAll().length*iBarWidth;this.lor=!this.lor;$(this).stop().animate({"left":to},speed,easing,function(){if(this===_this.itemToShow){onAnimateComplete.call(_this);}});});}
else{_this.itemToShow=$item[0];$itemsToMove=$item.nextAll().filter(function(){return!this.lor;});if($itemsToMove.length===0&&$allItems.index($item)!==0){$itemsToMove=$item;_this.itemToShow=$item.prev()[0];}
else if($itemsToMove.length===0&&$allItems.index($item)===0){_this.itemToShow=_this.itemToHide={};}
onTriggerAnimate.call(_this);$itemsToMove.each(function(){to=iWidth-($(this).nextAll().length+1)*iBarWidth;this.lor=!this.lor;$(this).stop().animate({"left":to},speed,easing,function(){if(this===$(_this.itemToShow).next()[0]){onAnimateComplete.call(_this);}});});}
iNow=$allItems.index(_this.itemToShow);}
return this;}});})(jQuery);